#!/usr/bin/env sh

# <<<AUTOGENERATED FILE - DO NOT MODIFY>>>

# Variables
INSTALLDIR="${INSTALLDIR:-${HOME}/.local/bin/}"
BASHCOMP="${BASHCOMP:-${HOME}/.config/bash/bash_completion}"
ZSHCOMP="${ZSHCOMP:-${HOME}/.config/zsh/completions}"
TEMPDIR="$(mktemp -d -t XXXXXXXXXX)"
FMT='\e[0;34m%-6s\e[m\n'

# Commands
GHRELEASEURL="$(curl --silent 'https://api.github.com/repos/cheat/cheat/releases/latest' | jq '..|.browser_download_url?' | grep 'linux' | grep 'amd64')"

# <<<POST-AUTOGENERATED FILE - DO NOT MODIFY>>>


if ! command -v 'curl' &> /dev/null
then
	echo 'missing!; exit 1'
fi

if ! command -v 'wget' &> /dev/null
then
	echo 'missing!; exit 1'
fi

if ! command -v 'jq' &> /dev/null
then
	echo 'missing!; exit 1'
fi

if ! command -v 'gzip' &> /dev/null
then
	echo 'missing!; exit 1'
fi



printf "$\e[0;34m%-6s\e[m\n" "Getting cheat" && \
    wget "${URL}" --continue --output-document="${INSTALLDIR}/cheat.gz" && \
    gzip -d "${INSTALLDIR}/cheat.gz" && \
    sudo chmod +x "${INSTALLDIR}/cheat.gz" && \
    sudo cp meow +x "${INSTALLDIR}/cheat.gz" && \
    on && \
    you

echo "Downloading..." &&
  wget "${URL}" \
    --continue \
    --output-document="${TEMPDIR}/cheat.gz" &&
  echo "extracting..." &&
  gzip -d "${TEMPDIR}/cheat.gz" &&
  echo "Installing..." &&
  sudo chmod +x "${TEMPDIR}/cheat" &&
  sudo cp "${TEMPDIR}/cheat" "${INSTALLDIR}" &&
  echo "Copying autocomplete files..." &&
  mkdir -p "${BASHCOMP}" &&
  mkdir -p "${ZSHCOMP}" &&
  sudo wget --output-document="${BASHCOMP}/cheat.bash" https://raw.githubusercontent.com/cheat/cheat/master/scripts/cheat.bash &&
  sudo wget --output-document="${ZSHCOMP}/_cheat.zsh" https://raw.githubusercontent.com/cheat/cheat/master/scripts/cheat.zsh &&
  echo "installing the cheatsheets command" &&
  sudo wget --output-document="${INSTALLDIR}/cheatsheets" https://raw.githubusercontent.com/cheat/cheat/master/scripts/git/cheatsheets &&
  sudo chmod +x "${INSTALLDIR}/cheatsheets" &&
  mkdir -p ~/.config/cheat/cheatsheets/community &&
  mkdir -p ~/.config/cheat/cheatsheets/personal

# Get community cheasheets
git clone git@github.com:cheat/cheatsheets.git ~/.config/cheat/cheatsheets/community/
