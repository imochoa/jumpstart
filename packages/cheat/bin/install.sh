#!/usr/bin/env sh
# <<<AUTOGENERATED - DO NOT MODIFY>>>
#		 >     File: install.sh
#		 >     Name: Cheat
#		 > Template: bin

# Variables
# TEST PRE!
INSTALL_DST="${INSTALL_DST:-${HOME}/.local/bin/}"
BASHCOMP_P="${BASHCOMP_P:-${HOME}/.config/bash/bash_completion}"
ZSHCOMP="${ZSHCOMP:-${HOME}/.config/zsh/completions}"
TEMPDIR="$(mktemp -d -t XXXXXXXXXX)"
FMT='\e[0;34m%-6s\e[m\n'
# Commands
DLTMP=$(mktemp -d -t jumpstart-XXXXXXXXXX) \
&& cd "${DLTMP}" \
&& printf "\e[0;34m%-6s\e[m\n" "Downloading to $(realpath .)" \
&& URL=$(curl --silent 'https://api.github.com/repos/cheat/cheat/releases/latest' | jq '..|.browser_download_url? | select( . != null )' | tr -d '"' | grep --ignore-case 'linux' | grep --ignore-case 'amd64') \
&& curl -jLO "${URL}" \
&& DLFILE=$(ls . | head -n1) \
&& printf "\e[0;34m%-6s\e[m\n" "Extracting..." \
&& gzip --decompress "${DLFILE}" \
&& echo "$(ls .)" \
&& SRCPATH=$( find . -type f | grep --ignore-case 'cheat' ) \
&& sudo chmod +x "${SRCPATH}" \
&& sudo mv "${SRCPATH}" "${INSTALL_DST}/cheat"


# # For binary
# srcbin=r'"${TEMPDIR}/cheat"'
# dstbin=r'"${INSTALLDIR}/cheat"'
# cheat_gz=r'"${INSTALLDIR}/cheat.gz"'
#
# bashcomp_url=r"https://raw.githubusercontent.com/cheat/cheat/master/scripts/cheat.bash"
# zshcomp_url=r"https://raw.githubusercontent.com/cheat/cheat/master/scripts/cheat.zsh"
#
# # Requirements
# cog.outl(require_cmds(["curl", "wget", "jq", "gzip",]))
#
# # Commands
# cog.outl(install_bin(orgrepo=ORGREPO,filters=str2list(FILTERS)))
#
# cog.outl(chain_cmds((
# printf("Getting cheat"),
# r'wget "${URL}" --continue --output-document=' + cheat_gz,
# f"gzip -d {cheat_gz}",
# f"sudo chmod +x {cheat_gz}",
# f"sudo cp meow +x {cheat_gz}",
# "on",
# "you",
# )))
#
